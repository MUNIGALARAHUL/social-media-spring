{"ast":null,"code":"import { AppConstants } from '../common/app.constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/auth.service\";\nimport * as i2 from \"../_services/token-storage.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../_services/user.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction LoginComponent_form_3_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \"Username is required!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_3_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_3_div_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password must be at least 6 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_3_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, LoginComponent_form_3_div_13_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵtemplate(2, LoginComponent_form_3_div_13_div_2_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r5 = i0.ɵɵreference(12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors.minlength);\n  }\n}\nfunction LoginComponent_form_3_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Login failed: \", ctx_r7.errorMessage, \"\");\n  }\n}\nfunction LoginComponent_form_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 5, 6);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_3_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const _r2 = i0.ɵɵreference(1);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(_r2.form.valid && ctx_r10.onSubmit());\n    });\n    i0.ɵɵelementStart(2, \"div\", 7)(3, \"label\", 8);\n    i0.ɵɵtext(4, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 9, 10);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_3_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.form.username = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, LoginComponent_form_3_div_7_Template, 2, 0, \"div\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 7)(9, \"label\", 12);\n    i0.ɵɵtext(10, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 13, 14);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_3_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.form.password = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, LoginComponent_form_3_div_13_Template, 3, 2, \"div\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 7)(15, \"button\", 15);\n    i0.ɵɵtext(16, \"Login\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 7);\n    i0.ɵɵtemplate(18, LoginComponent_form_3_div_18_Template, 2, 1, \"div\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 7)(20, \"p\", 16)(21, \"span\");\n    i0.ɵɵtext(22, \"or\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"p\", 17);\n    i0.ɵɵtext(24, \" Sign in with: \");\n    i0.ɵɵelementStart(25, \"a\", 18);\n    i0.ɵɵelement(26, \"img\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"a\", 20);\n    i0.ɵɵelement(28, \"img\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"a\", 20);\n    i0.ɵɵelement(30, \"img\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"a\", 20);\n    i0.ɵɵelement(32, \"img\", 23);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(1);\n    const _r3 = i0.ɵɵreference(6);\n    const _r5 = i0.ɵɵreference(12);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r2.submitted && _r3.invalid);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.password);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r2.submitted && _r5.invalid);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLoginFailed);\n    i0.ɵɵadvance(7);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r0.googleURL, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r0.facebookURL, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r0.githubURL, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r0.linkedinURL, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction LoginComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Welcome \", ctx_r1.currentUser.displayName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Logged in as \", ctx_r1.currentUser.roles, \".\");\n  }\n}\nexport class LoginComponent {\n  constructor(authService, tokenStorage, route, userService) {\n    this.authService = authService;\n    this.tokenStorage = tokenStorage;\n    this.route = route;\n    this.userService = userService;\n    this.form = {};\n    this.isLoggedIn = false;\n    this.isLoginFailed = false;\n    this.errorMessage = '';\n    this.googleURL = AppConstants.GOOGLE_AUTH_URL;\n    this.facebookURL = AppConstants.FACEBOOK_AUTH_URL;\n    this.githubURL = AppConstants.GITHUB_AUTH_URL;\n    this.linkedinURL = AppConstants.LINKEDIN_AUTH_URL;\n  }\n  ngOnInit() {\n    const token = this.route.snapshot.queryParamMap.get('token');\n    const error = this.route.snapshot.queryParamMap.get('error');\n    if (this.tokenStorage.getToken()) {\n      this.isLoggedIn = true;\n      this.currentUser = this.tokenStorage.getUser();\n    } else if (token) {\n      this.tokenStorage.saveToken(token);\n      this.userService.getCurrentUser().subscribe(data => {\n        this.login(data);\n      }, err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      });\n    } else if (error) {\n      this.errorMessage = error;\n      this.isLoginFailed = true;\n    }\n  }\n  onSubmit() {\n    this.authService.login(this.form).subscribe(data => {\n      this.tokenStorage.saveToken(data.accessToken);\n      this.login(data.user);\n    }, err => {\n      this.errorMessage = err.error.message;\n      this.isLoginFailed = true;\n    });\n  }\n  login(user) {\n    this.tokenStorage.saveUser(user);\n    this.isLoginFailed = false;\n    this.isLoggedIn = true;\n    this.currentUser = this.tokenStorage.getUser();\n    window.location.reload();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.TokenStorageService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.UserService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[1, \"col-md-12\"], [1, \"card\", \"card-container\"], [\"id\", \"profile-img\", \"src\", \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\", 1, \"profile-img-card\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"username\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"username\", \"ngModel\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [\"for\", \"password\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", \"minlength\", \"6\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [1, \"btn\", \"btn-primary\", \"btn-block\"], [1, \"content-divider\", \"center\", \"mt-3\"], [1, \"social-login\", \"text-center\"], [1, \"ml-2\", 3, \"href\"], [\"alt\", \"Login with Google\", \"src\", \"/assets/img/google.png\", 1, \"btn-img\"], [3, \"href\"], [\"alt\", \"Login with Facebook\", \"src\", \"/assets/img/facebook.png\", 1, \"btn-img\"], [\"alt\", \"Login with Github\", \"src\", \"/assets/img/github.png\", 1, \"btn-img\"], [\"alt\", \"Login with Linkedin\", \"src\", \"/assets/img/linkedin.png\", 1, \"btn-img-linkedin\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [4, \"ngIf\"], [1, \"alert\", \"alert-success\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵtemplate(3, LoginComponent_form_3_Template, 33, 9, \"form\", 3);\n      i0.ɵɵtemplate(4, LoginComponent_div_4_Template, 4, 2, \"div\", 4);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n    }\n  },\n  dependencies: [i5.NgIf, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.MinLengthValidator, i6.NgModel, i6.NgForm],\n  styles: [\"label[_ngcontent-%COMP%] {\\n  display: block;\\n  margin-top: 10px;\\n}\\n\\n.card-container.card[_ngcontent-%COMP%] {\\n  max-width: 400px !important;\\n  padding: 40px 40px;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  background-color: #f7f7f7;\\n  padding: 20px 25px 30px;\\n  margin: 0 auto 25px;\\n  margin-top: 50px;\\n  border-radius: 2px;\\n  box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);\\n}\\n\\n.profile-img-card[_ngcontent-%COMP%] {\\n  width: 96px;\\n  height: 96px;\\n  margin: 0 auto 10px;\\n  display: block;\\n  border-radius: 50%;\\n}\\n\\n.content-divider.center[_ngcontent-%COMP%] {\\n\\ttext-align: center;\\n}\\n\\n.content-divider[_ngcontent-%COMP%] {\\n\\tposition: relative;\\n\\tz-index: 1;\\n}\\n\\n.content-divider[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .content-divider[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] {\\n\\tbackground-color: #fff;\\n\\tcolor: #000;\\n\\tdisplay: inline-block;\\n\\tpadding: 2px 12px;\\n\\tborder-radius: 3px;\\n\\ttext-transform: uppercase;\\n\\tfont-weight: 500;\\n}\\n\\n.content-divider[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:before, .content-divider[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:before {\\n\\tcontent: \\\"\\\";\\n\\tposition: absolute;\\n\\ttop: 50%;\\n\\tleft: 0;\\n\\theight: 1px;\\n\\tbackground-color: #ddd;\\n\\twidth: 100%;\\n\\tz-index: -1;\\n}\\n\\n.social-login[_ngcontent-%COMP%]   .btn-img[_ngcontent-%COMP%] {\\n\\twidth: 30px;\\n\\theight: auto;\\n\\tpadding: 0.6rem 0;\\n\\tmargin-right: 15px;\\n}\\n\\n.btn-img-linkedin[_ngcontent-%COMP%] {\\n\\twidth: auto;\\n\\theight: 50px;\\n\\tpadding: 0.6rem 0;\\n\\tmargin-right: 10px;\\n}\\n\\n.form-group[_ngcontent-%COMP%]   .has-error[_ngcontent-%COMP%] {\\n\\tcolor: red;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQWM7RUFDZCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSwyQkFBMkI7RUFDM0Isa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLHVCQUF1QjtFQUN2QixtQkFBbUI7RUFDbkIsZ0JBQWdCO0VBR2hCLGtCQUFrQjtFQUdsQiwwQ0FBMEM7QUFDNUM7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixjQUFjO0VBR2Qsa0JBQWtCO0FBQ3BCOztBQUVBO0NBQ0Msa0JBQWtCO0FBQ25COztBQUVBO0NBQ0Msa0JBQWtCO0NBQ2xCLFVBQVU7QUFDWDs7QUFFQTtDQUNDLHNCQUFzQjtDQUN0QixXQUFXO0NBQ1gscUJBQXFCO0NBQ3JCLGlCQUFpQjtDQUNqQixrQkFBa0I7Q0FDbEIseUJBQXlCO0NBQ3pCLGdCQUFnQjtBQUNqQjs7QUFFQTtDQUNDLFdBQVc7Q0FDWCxrQkFBa0I7Q0FDbEIsUUFBUTtDQUNSLE9BQU87Q0FDUCxXQUFXO0NBQ1gsc0JBQXNCO0NBQ3RCLFdBQVc7Q0FDWCxXQUFXO0FBQ1o7O0FBRUE7Q0FDQyxXQUFXO0NBQ1gsWUFBWTtDQUNaLGlCQUFpQjtDQUNqQixrQkFBa0I7QUFDbkI7O0FBRUE7Q0FDQyxXQUFXO0NBQ1gsWUFBWTtDQUNaLGlCQUFpQjtDQUNqQixrQkFBa0I7QUFDbkI7O0FBRUE7Q0FDQyxVQUFVO0FBQ1giLCJzb3VyY2VzQ29udGVudCI6WyJsYWJlbCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tdG9wOiAxMHB4O1xufVxuXG4uY2FyZC1jb250YWluZXIuY2FyZCB7XG4gIG1heC13aWR0aDogNDAwcHggIWltcG9ydGFudDtcbiAgcGFkZGluZzogNDBweCA0MHB4O1xufVxuXG4uY2FyZCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmN2Y3Zjc7XG4gIHBhZGRpbmc6IDIwcHggMjVweCAzMHB4O1xuICBtYXJnaW46IDAgYXV0byAyNXB4O1xuICBtYXJnaW4tdG9wOiA1MHB4O1xuICAtbW96LWJvcmRlci1yYWRpdXM6IDJweDtcbiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAycHg7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgLW1vei1ib3gtc2hhZG93OiAwcHggMnB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gIC13ZWJraXQtYm94LXNoYWRvdzogMHB4IDJweCAycHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuICBib3gtc2hhZG93OiAwcHggMnB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG59XG5cbi5wcm9maWxlLWltZy1jYXJkIHtcbiAgd2lkdGg6IDk2cHg7XG4gIGhlaWdodDogOTZweDtcbiAgbWFyZ2luOiAwIGF1dG8gMTBweDtcbiAgZGlzcGxheTogYmxvY2s7XG4gIC1tb3otYm9yZGVyLXJhZGl1czogNTAlO1xuICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDUwJTtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xufVxuXG4uY29udGVudC1kaXZpZGVyLmNlbnRlciB7XG5cdHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLmNvbnRlbnQtZGl2aWRlciB7XG5cdHBvc2l0aW9uOiByZWxhdGl2ZTtcblx0ei1pbmRleDogMTtcbn1cblxuLmNvbnRlbnQtZGl2aWRlcj5zcGFuLCAuY29udGVudC1kaXZpZGVyPmEge1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuXHRjb2xvcjogIzAwMDtcblx0ZGlzcGxheTogaW5saW5lLWJsb2NrO1xuXHRwYWRkaW5nOiAycHggMTJweDtcblx0Ym9yZGVyLXJhZGl1czogM3B4O1xuXHR0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuXHRmb250LXdlaWdodDogNTAwO1xufVxuXG4uY29udGVudC1kaXZpZGVyPnNwYW46YmVmb3JlLCAuY29udGVudC1kaXZpZGVyPmE6YmVmb3JlIHtcblx0Y29udGVudDogXCJcIjtcblx0cG9zaXRpb246IGFic29sdXRlO1xuXHR0b3A6IDUwJTtcblx0bGVmdDogMDtcblx0aGVpZ2h0OiAxcHg7XG5cdGJhY2tncm91bmQtY29sb3I6ICNkZGQ7XG5cdHdpZHRoOiAxMDAlO1xuXHR6LWluZGV4OiAtMTtcbn1cblxuLnNvY2lhbC1sb2dpbiAuYnRuLWltZyB7XG5cdHdpZHRoOiAzMHB4O1xuXHRoZWlnaHQ6IGF1dG87XG5cdHBhZGRpbmc6IDAuNnJlbSAwO1xuXHRtYXJnaW4tcmlnaHQ6IDE1cHg7XG59XG5cbi5idG4taW1nLWxpbmtlZGluIHtcblx0d2lkdGg6IGF1dG87XG5cdGhlaWdodDogNTBweDtcblx0cGFkZGluZzogMC42cmVtIDA7XG5cdG1hcmdpbi1yaWdodDogMTBweDtcbn1cblxuLmZvcm0tZ3JvdXAgLmhhcy1lcnJvciB7XG5cdGNvbG9yOiByZWQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["AppConstants","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","LoginComponent_form_3_div_13_div_1_Template","LoginComponent_form_3_div_13_div_2_Template","ɵɵadvance","ɵɵproperty","_r5","errors","required","minlength","ɵɵtextInterpolate1","ctx_r7","errorMessage","ɵɵlistener","LoginComponent_form_3_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r11","_r2","ɵɵreference","ctx_r10","ɵɵnextContext","ɵɵresetView","form","valid","onSubmit","LoginComponent_form_3_Template_input_ngModelChange_5_listener","$event","ctx_r12","username","LoginComponent_form_3_div_7_Template","LoginComponent_form_3_Template_input_ngModelChange_11_listener","ctx_r13","password","LoginComponent_form_3_div_13_Template","LoginComponent_form_3_div_18_Template","ɵɵelement","ctx_r0","submitted","_r3","invalid","isLoginFailed","ɵɵpropertyInterpolate","googleURL","ɵɵsanitizeUrl","facebookURL","githubURL","linkedinURL","ctx_r1","currentUser","displayName","roles","LoginComponent","constructor","authService","tokenStorage","route","userService","isLoggedIn","GOOGLE_AUTH_URL","FACEBOOK_AUTH_URL","GITHUB_AUTH_URL","LINKEDIN_AUTH_URL","ngOnInit","token","snapshot","queryParamMap","get","error","getToken","getUser","saveToken","getCurrentUser","subscribe","data","login","err","message","accessToken","user","saveUser","window","location","reload","ɵɵdirectiveInject","i1","AuthService","i2","TokenStorageService","i3","ActivatedRoute","i4","UserService","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","LoginComponent_form_3_Template","LoginComponent_div_4_Template"],"sources":["F:\\spring-boot-angular-oauth2-social-login-demo-main\\angular-11-social-login\\src\\app\\login\\login.component.ts","F:\\spring-boot-angular-oauth2-social-login-demo-main\\angular-11-social-login\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AuthService } from '../_services/auth.service';\nimport { UserService } from '../_services/user.service';\nimport { TokenStorageService } from '../_services/token-storage.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { AppConstants } from '../common/app.constants';\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n\n  form: any = {};\n  isLoggedIn = false;\n  isLoginFailed = false;\n  errorMessage = '';\n  currentUser: any;\n  googleURL = AppConstants.GOOGLE_AUTH_URL;\n  facebookURL = AppConstants.FACEBOOK_AUTH_URL;\n  githubURL = AppConstants.GITHUB_AUTH_URL;\n  linkedinURL = AppConstants.LINKEDIN_AUTH_URL;\n\n  constructor(private authService: AuthService, private tokenStorage: TokenStorageService, private route: ActivatedRoute, private userService: UserService) {}\n\n  ngOnInit(): void {\n\tconst token: string = this.route.snapshot.queryParamMap.get('token');\n\tconst error: string = this.route.snapshot.queryParamMap.get('error');\n  \tif (this.tokenStorage.getToken()) {\n      this.isLoggedIn = true;\n      this.currentUser = this.tokenStorage.getUser();\n    }\n  \telse if(token){\n  \t\tthis.tokenStorage.saveToken(token);\n  \t\tthis.userService.getCurrentUser().subscribe(\n  \t\t      data => {\n  \t\t        this.login(data);\n  \t\t      },\n  \t\t      err => {\n  \t\t        this.errorMessage = err.error.message;\n  \t\t        this.isLoginFailed = true;\n  \t\t      }\n  \t\t  );\n  \t}\n  \telse if(error){\n  \t\tthis.errorMessage = error;\n\t    this.isLoginFailed = true;\n  \t}\n  }\n\n  onSubmit(): void {\n    this.authService.login(this.form).subscribe(\n      data => {\n        this.tokenStorage.saveToken(data.accessToken);\n        this.login(data.user);\n      },\n      err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    );\n  }\n\n  login(user): void {\n\tthis.tokenStorage.saveUser(user);\n\tthis.isLoginFailed = false;\n\tthis.isLoggedIn = true;\n\tthis.currentUser = this.tokenStorage.getUser();\n    window.location.reload();\n  }\n\n}\n","<div class=\"col-md-12\">\n\t<div class=\"card card-container\">\n\t\t<img id=\"profile-img\" src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\" class=\"profile-img-card\" />\n\t\t<form *ngIf=\"!isLoggedIn\" name=\"form\" (ngSubmit)=\"f.form.valid && onSubmit()\" #f=\"ngForm\" novalidate>\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<label for=\"username\">Email</label> <input type=\"text\" class=\"form-control\" name=\"username\" [(ngModel)]=\"form.username\" required #username=\"ngModel\" />\n\t\t\t\t<div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"f.submitted && username.invalid\">Username is required!</div>\n\t\t\t</div>\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<label for=\"password\">Password</label> <input type=\"password\" class=\"form-control\" name=\"password\" [(ngModel)]=\"form.password\" required minlength=\"6\"\n\t\t\t\t\t#password=\"ngModel\" />\n\t\t\t\t<div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"f.submitted && password.invalid\">\n\t\t\t\t\t<div *ngIf=\"password.errors.required\">Password is required</div>\n\t\t\t\t\t<div *ngIf=\"password.errors.minlength\">Password must be at least 6 characters</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<button class=\"btn btn-primary btn-block\">Login</button>\n\t\t\t</div>\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"isLoginFailed\">Login failed: {{ errorMessage }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<p class=\"content-divider center mt-3\">\n\t\t\t\t\t<span>or</span>\n\t\t\t\t</p>\n\t\t\t\t<p class=\"social-login text-center\">\n\t\t\t\t\tSign in with:\n\t\t\t\t\t<a href=\"{{ googleURL }}\" class=\"ml-2\">\n\t\t\t\t\t\t<img alt=\"Login with Google\" src=\"/assets/img/google.png\" class=\"btn-img\">\n\t\t\t\t\t</a>\n\t\t\t\t\t<a href=\"{{ facebookURL }}\">\n\t\t\t\t\t\t<img alt=\"Login with Facebook\" src=\"/assets/img/facebook.png\" class=\"btn-img\">\n\t\t\t\t\t</a>\n\t\t\t\t\t<a href=\"{{ githubURL }}\">\n\t\t\t\t\t\t<img alt=\"Login with Github\" src=\"/assets/img/github.png\" class=\"btn-img\">\n\t\t\t\t\t</a>\n\t\t\t\t\t<a href=\"{{ linkedinURL }}\">\n\t\t\t\t\t\t<img alt=\"Login with Linkedin\" src=\"/assets/img/linkedin.png\" class=\"btn-img-linkedin\">\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</form>\n\t\t<div class=\"alert alert-success\" *ngIf=\"isLoggedIn\">Welcome {{currentUser.displayName}} <br>Logged in as {{ currentUser.roles }}.</div>\n\t</div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}